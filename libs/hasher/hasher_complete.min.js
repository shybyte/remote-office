(function(h){function j(a,b,c,e,i){this._listener=b;this._isOnce=c;this.context=e;this._signal=a;this._priority=i||0}function c(a,b){if("function"!==typeof a)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b));}var e={VERSION:"0.6.3"};j.prototype={active:!0,params:null,execute:function(a){var b;this.active&&this._listener&&(a=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,a),this._isOnce&&this.detach());return b},detach:function(){return this.isBound()?
this._signal.remove(this._listener):null},isBound:function(){return!!this._signal&&!!this._listener},getListener:function(){return this._listener},_destroy:function(){delete this._signal;delete this._listener;delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce: "+this._isOnce+", isBound: "+this.isBound()+", active: "+this.active+"]"}};e.Signal=function(){this._bindings=[]};e.Signal.prototype={_shouldPropagate:!0,active:!0,_registerListener:function(a,
b,c,e){var i=this._indexOfListener(a);if(-1!==i){if(a=this._bindings[i],a.isOnce()!==b)throw Error("You cannot add"+(b?"":"Once")+"() then add"+(!b?"":"Once")+"() the same listener without removing the relationship first.");}else a=new j(this,a,b,c,e),this._addBinding(a);return a},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a){for(var b=this._bindings.length;b--;)if(this._bindings[b]._listener===
a)return b;return-1},add:function(a,b,e){c(a,"add");return this._registerListener(a,!1,b,e)},addOnce:function(a,b,e){c(a,"addOnce");return this._registerListener(a,!0,b,e)},remove:function(a){c(a,"remove");var b=this._indexOfListener(a);-1!==b&&(this._bindings[b]._destroy(),this._bindings.splice(b,1));return a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=
!1},dispatch:function(a){if(this.active){var b=Array.prototype.slice.call(arguments),c=this._bindings.slice(),e=this._bindings.length;this._shouldPropagate=!0;do e--;while(c[e]&&this._shouldPropagate&&!1!==c[e].execute(b))}},dispose:function(){this.removeAll();delete this._bindings},toString:function(){return"[Signal active: "+this.active+" numListeners: "+this.getNumListeners()+"]"}};h.signals=e})(window||this);(function(h){h("hasher",["signals"],function(j){return function(c){function e(a){return!a?"":a.replace(RegExp("^\\"+d.prependHash+"|\\"+d.appendHash+"$","g"),"")}function a(){var a=s.exec(d.getURL());return a&&a[1]?decodeURIComponent(a[1]):""}function b(){if(g&&f!==(g?g.contentWindow.frameHash:null)){var a=g.contentWindow.document;a.open();a.write("<html><head><title>"+i.title+'</title><script type="text/javascript">var frameHash="'+f+'";<\/script></head><body>&nbsp;</body></html>');a.close()}}function h(a,
c){a=decodeURIComponent(a);if(f!==a){var i=f;f=a;m&&(c?g.contentWindow.frameHash=a:b());d.changed.dispatch(e(a),e(i))}}function q(a){var a=Array.prototype.slice.call(arguments),b=a.join(d.separator),b=b?d.prependHash+b.replace(t,"")+d.appendHash:b;r&&u&&(b=b.replace(/\?/,"%3F"));return b}var i=c.document,n=j.Signal,d,f,o,l,g,k,s=/#(.*)$/,v=/(\?.*)|(\#.*)/,t=/^\#/,r=!+"\v1",p="onhashchange"in c,m=r&&!p,u="file:"===c.location.protocol;k=m?function(){var b=a(),c=g?g.contentWindow.frameHash:null;c!==
f&&c!==b?d.setHash(e(c)):b!==f&&h(b)}:function(){var b=a();b!==f&&h(b)};d={VERSION:"1.1.0",appendHash:"",prependHash:"/",separator:"/",changed:new n,stopped:new n,initialized:new n,init:function(){l||(f=a(),p?c.addEventListener?c.addEventListener("hashchange",k,!1):c.attachEvent&&c.attachEvent("onhashchange",k):(m&&(g||(g=i.createElement("iframe"),g.src="about:blank",g.style.display="none",i.body.appendChild(g)),b()),o=setInterval(k,25)),l=!0,d.initialized.dispatch(e(f)))},stop:function(){l&&(p?c.removeEventListener?
c.removeEventListener("hashchange",k,!1):c.detachEvent&&c.detachEvent("onhashchange",k):(clearInterval(o),o=null),l=!1,d.stopped.dispatch(e(f)))},isActive:function(){return l},getURL:function(){return c.location.href},getBaseURL:function(){return d.getURL().replace(v,"")},setHash:function(a){a=q.apply(null,arguments);a!==f&&(h(a),c.location.hash="#"+encodeURI(a))},replaceHash:function(a){a=q.apply(null,arguments);a!==f&&(h(a,!0),c.location.replace("#"+encodeURI(a)))},getHash:function(){return e(f)},
getHashAsArray:function(){return d.getHash().split(d.separator)},dispose:function(){d.stop();d.initialized.dispose();d.stopped.dispose();d.changed.dispose();g=d=c.hasher=null},toString:function(){return'[hasher version="'+d.VERSION+'" hash="'+d.getHash()+'"]'}};d.initialized.memorize=!0;return d}(window)})})("function"===typeof define&&define.amd?define:function(h,j,c){window[h]=c(window[j[0]])});
